sudo: true
services:
- docker
before_install:
- travis_retry docker build -t chocobozzz/peertube .
- docker run -d --publish=9000:9000 chocobozzz/peertube
script:
- sleep 300 && curl http://localhost:9000
- docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"
- docker push chocobozzz/peertube:latest
env:
  global:
  - secure: UvDJw2gKGbNFY8tpigiaK7wPRO+131iq0pzN+rYyk50QB9vFVYIx35PO+/QxzFD/vrwEVz/rmtg60hE98A6Ctnb9ZCYwt8m3ZEVOKO9IZXUTHg21/S3uS7k5EjhbDh13IDNQcZxYuEmcTt9mPycfflM8wkMucyjaQOE05Vv8p7K7xdC2uUZB88mW4/Lm6gzmUAXF/wtyTr3C1SS+8Q5R35UCKrPqS/VSLouihIMTQm0dPKEsGg6l4MKvhXURTyTABNpjPdqhG+AU87LVRq2bOILGvu3LPMgDr2jMewkkkqDu/vBEkBE2lJDxeZFEolvfaps/8A+qF59wm/eOWhq4lbWX5AvPyKFmy9N6rgjySTA6NN9G33d2U/Y+oKOwOx+wS9TD79eYhDp919lz/DQO2sgAtDXJemjq+fs0jFoQT+ji99aVr+yGYAY6ObyT9kvhJz7DSIvN6ypQLB9uRBzu+UpxcIimu8OgliqtRu64eDxLeoqe6shI2Uj4vr23kiqAB3lQMkXq/iwJnQf0d9dPzpcLM2tFKs+ks3796NC0cR6MFRihx8L1zf65K1dLzpZhlJoPZnI56HyEs4snPfYta7A5U+gdliSXyIiKZ9YR124ur77w52j0rhsXpbrH7y8kiAlDa8ERyGHFIU0J073NoS7jQuri+4TxnYlVNVdF54Y=
  - secure: sIOS78j3OCkng581te3A8sGG/ZurfsCu9uqtZtgG6AVQ8iKU0nkAcbz1fVDvTeZ5r11alUUovzVVrKs8S7vO2YHsfS7ZshUoHw3X4zPcHMzJYNOyYA7xlVAoFYIKUv5MDISn8XN4q38yStheX1CILEmGUG9nZ/v1JPAX6sdPq6L1JZKNlTnojKj8OjMtCcMVkcs+L9CB8zjop5AZz/mF4nzhyADHCBDJxQ0KPkhZPxA8j1Ht8Z070N71HLhCwPv91xRTzKkVmtEYjPqyV74jlI8A6f9ubcU386uF/DGJ371mj62EHIFmS5Eu0TdxYmz5Xs2ose4/hqyVKGiCpFFFdY2Uvio8SlDCCsfsNoFE1bRqJru4CziHMKBN9VKYJvxAONxiIMZOd3NGQSbMYi8JqB5VNE9OxJzJrKfjhs/3OCHyqQZB3SDgI/72xZ49zOgxXXkC0Bx8+0I0b3ouzIy4C5RY/0V1KvNWSC9CG+M4iSXIwmhasZQNVX3J/5wINn5fams3jo23Jb9yO5SnhM3YNczm3O6zp+BplnzjqHj48MjKewntzd1OEnpsy3lpxvFx8UDsMBpPDERloEqD2z++5LJuFZ3dizysQPKxFM/Gjv7fVrb80/PuBZErqpi/NpB2HMU3eHRqdMvqvoIZgs8U3FT3ZEyYD8YsMDgFjgnzlkk=
  - secure: bsTnTaISiFQtcqzFiFWnCCKoQO9iTZtHHCVGz3P3+9mQiIwnWdsyIJ2EiYrXK0E0WZqZ498sfIOgzM0R/bwMuGbLhd89RiQL9x3kS4Z/v2haKXew4CSpeJLDovp6C2hionc5eTlHIlxf4lMYa42pMQZzs0UGP3jtljnMdm2DQR4sg6QlFG0eUSdtZPZUxTnswMgJMEWx45Pj8QRl5ImQk/OfG6oxUhYkYz+N7oOESuJ1M0MyZQYxQiPZeE3WqXyvmWH4aurbdFzCWJrGcHI4c4aOAZWOcQIzZhm8FqskWrV32ZdGEXmJNoD1QX3kzD2Nvi8F8eisqJbZF/rAvnogWP52N3SKsJP1kH7LRa861PZIbOy026T6HtIylSxbY5rLAk7B1LozAKUFrDpSYLfVY/Nn96ZpTSYBiCPM/nztZ3eGZ/tzf4YGT+gwaVAsRJ4gkN6t2Vh/GjzdLkCQ89U14henkQCGlp+1dQWNWdHsAII2hMw2+maRBBQBj67jcV2B54NdI4EaUWoFqSFTx9WgLfYE89lQKl3hZVfVECXQcGCW/VPD4IUwCuzXgF1Br7FcyaE129HpuEzMIF9um977JHMy2cRdKo8Gcd972o03VrmxEsNForCXU62FDPsZJ22VF3aOTkLdgA2DpCBomtmen8DRQP1Q+7ZOkj9WgLY/h3M=
